# ================================
# CONFIG NETLIFY - GabaritKDP
# ================================

[build]
  publish = "."
  functions = "netlify/functions"

[functions]
  node_bundler = "esbuild"

# ================================
# GENERATOR (React build)
# URL publique â†’ /generator
# ================================

# Redirection propre
[[redirects]]
  from = "/generator"
  to = "/dist-generator"
  status = 301
  force = true

# Assets + routing React
[[redirects]]
  from = "/generator/*"
  to = "/dist-generator/:splat"
  status = 200
  force = true

# ================================
# ANCIENES URLS (optionnel)
# ================================

[[redirects]]
  from = "/generator.html"
  to = "/generator"
  status = 301
  force = true

[[redirects]]
  from = "/generator.html/*"
  to = "/generator"
  status = 301
  force = true

# ================================
# SPA fallback (IMPORTANT)
# ================================

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
